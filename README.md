# llm-create-issue-user-story

Create a GitHub issue with a complete user story generated by a Large Language Model (LLM).

## Overview

This GitHub Action automatically creates GitHub issues with comprehensive user stories generated using OpenAI or Azure OpenAI. It helps teams quickly generate well-structured user stories with acceptance criteria, technical details, testing strategies, and definition of done.

## Features

- **LLM-Powered Generation**: Uses OpenAI or Azure OpenAI to generate detailed user stories
- **Smart Title Generation**: Issue titles are automatically generated by the LLM based on context
- **Customizable Parameters**: Configure complexity, duration, and description for tailored stories
- **Auto-Labeling**: Automatically add labels to created issues
- **Auto-Assignment**: Assign issues to team members automatically
- **Flexible AI Provider**: Supports both OpenAI and Azure OpenAI

## Usage

### Basic Example with OpenAI

```yaml
name: Create User Story Issue
on:
  workflow_dispatch:
    inputs:
      issue_title:
        description: 'Title for the issue'
        required: true
      issue_description:
        description: 'Brief description of the feature'
        required: true

jobs:
  create-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create Issue with User Story
        uses: cedricve/llm-create-issue-user-story@main
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          openai_api_key: ${{ secrets.OPENAI_API_KEY }}
          issue_title: ${{ github.event.inputs.issue_title }}
          issue_description: ${{ github.event.inputs.issue_description }}
          complexity: 'Medium'
          duration: '1 week'
          labels: 'user-story,enhancement'
```

### Example with Azure OpenAI

```yaml
name: Create User Story Issue
on:
  workflow_dispatch:
    inputs:
      issue_title:
        description: 'Title for the issue'
        required: true
      issue_description:
        description: 'Brief description of the feature'
        required: true

jobs:
  create-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create Issue with User Story
        uses: cedricve/llm-create-issue-user-story@main
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          azure_openai_api_key: ${{ secrets.AZURE_OPENAI_API_KEY }}
          azure_openai_endpoint: ${{ secrets.AZURE_OPENAI_ENDPOINT }}
          azure_openai_version: '2024-02-15-preview'
          openai_model: 'gpt-4'
          issue_title: ${{ github.event.inputs.issue_title }}
          issue_description: ${{ github.event.inputs.issue_description }}
          complexity: 'High'
          duration: '2 weeks'
          labels: 'user-story,feature'
          assignees: 'username1,username2'
```

## Inputs

| Input | Description | Required | Default |
|-------|-------------|----------|---------|
| `github_token` | GitHub token for authentication | Yes | - |
| `openai_api_key` | API key for OpenAI services | No | '' |
| `azure_openai_api_key` | API key for Azure OpenAI services | No | '' |
| `openai_model` | OpenAI model for chat/completions endpoint | No | `gpt-4o-mini` |
| `azure_openai_endpoint` | Azure OpenAI endpoint URL | No | '' |
| `azure_openai_version` | Azure OpenAI API version | No | '' |
| `issue_title` | Context/reference title (LLM generates the actual issue title) | Yes | - |
| `issue_description` | Brief description of the feature or user story | Yes | - |
| `complexity` | Complexity level (e.g., Low, Medium, High) | No | `Medium` |
| `duration` | Estimated duration (e.g., 1 day, 1 week, 2 weeks) | No | `1 week` |
| `max_tokens` | Max number of tokens for the prompt | No | `2000` |
| `temperature` | Model creativity level (0.0-2.0, higher = more creative) | No | `0.7` |
| `labels` | Comma-separated list of labels to add to the issue | No | '' |
| `assignees` | Comma-separated list of GitHub usernames to assign | No | '' |

## Generated User Story Structure

The action generates user stories with the following sections:

1. **Title**: A concise, descriptive title generated by the LLM
2. **User Story**: As a [user], I want [goal] so that [benefit]
3. **Acceptance Criteria**: Specific, testable criteria
4. **Technical Details**: Implementation notes and dependencies
5. **Testing Strategy**: How to test the feature
6. **Definition of Done**: Checklist of completion items

**Note**: The GitHub issue title is generated by the LLM, not taken directly from the `issue_title` input. The `issue_title` input is used as context to help the LLM understand what to generate.

## Requirements

- Either `openai_api_key` or `azure_openai_api_key` must be provided
- `github_token` is required for creating issues

## Setting Up Secrets

1. Go to your repository's Settings → Secrets and variables → Actions
2. Add the following secrets:
   - `OPENAI_API_KEY`: Your OpenAI API key (if using OpenAI)
   - `AZURE_OPENAI_API_KEY`: Your Azure OpenAI API key (if using Azure)
   - `AZURE_OPENAI_ENDPOINT`: Your Azure OpenAI endpoint URL (if using Azure)

## Example Output

When you run this action, it will create a GitHub issue with a structure similar to:

**Issue Title (generated by LLM):** "Implement User Authentication System"

**Issue Body:**
```markdown
## User Story
As a developer, I want to implement user authentication so that users can securely access their accounts.

## Acceptance Criteria
- Users can register with email and password
- Users can log in with their credentials
- Users can log out from the application
- Session tokens expire after 24 hours
- Failed login attempts are limited to 5 per hour

## Technical Details
- Use JWT tokens for authentication
- Hash passwords using bcrypt
- Store user credentials in the database
...
```

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License.

## Inspiration

This action was inspired by the [llm-generated-readme](https://github.com/cedricve/llm-generated-readme) project.
